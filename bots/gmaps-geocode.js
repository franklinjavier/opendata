'use strict';

var http = require('http'),
    _ = require('lodash'),
    url = 'http://maps.googleapis.com/maps/api/geocode/json?latlng={lat},{lon}';

    // Adicionando metodo ao lodash
    _.sum = function(obj, key) {
        var arr;
        if (_.isArray(obj) && typeof obj[0] === 'number') {
            arr = obj;
        } else {
            key = key || 'value';
            arr = _.pluck(obj, key);
        }
        var val = 0, i;
        for (i = 0; i < arr.length; i++)
        val += (arr[i]-0);
        return val;
    };

    // Adicionando metodo ao lodash
    _.average = function( obj, key ) {
        return _.sum(obj, key) / _.size(obj);
    };



    var coordinates = [
        [-48.9001653, -21.3705844],
        [-48.9055424, -21.363832],
        [-48.9073402, -21.3584417],
        [-48.9146768, -21.3576737],
        [-48.916924, -21.3533892],
        [-48.921715, -21.3491209],
        [-48.9232505, -21.3452102],
        [-48.920318, -21.3377319],
        [-48.9201703, -21.3311157],
        [-48.9155202, -21.3258496],
        [-48.9190607, -21.3231367],
        [-48.9198995, -21.3150345],
        [-48.9229962, -21.3110563],
        [-48.9238422, -21.303237],
        [-48.9200904, -21.2995922],
        [-48.9178995, -21.2976108],
        [-48.9180566, -21.2933317],
        [-48.9122796, -21.2840893],
        [-48.9051838, -21.2765109],
        [-48.9048009, -21.2677452],
        [-48.8995138, -21.2629228],
        [-48.8972178, -21.2622736],
        [-48.8917007, -21.2654534],
        [-48.8815942, -21.2663328],
        [-48.874408, -21.2618656],
        [-48.8712046, -21.2705258],
        [-48.8638335, -21.2515303],
        [-48.8576008, -21.2472582],
        [-48.8474897, -21.2371218],
        [-48.8561525, -21.2318654],
        [-48.8594711, -21.2279779],
        [-48.8505839, -21.2200277],
        [-48.8449169, -21.2188449],
        [-48.8435349, -21.2203373],
        [-48.8356441, -21.2201896],
        [-48.8296724, -21.2223783],
        [-48.8254177, -21.2222322],
        [-48.8178879, -21.215652],
        [-48.8132328, -21.2144488],
        [-48.804337, -21.2161175],
        [-48.7997051, -21.2197176],
        [-48.7840364, -21.2242853],
        [-48.7739553, -21.2221269],
        [-48.7700748, -21.2183191],
        [-48.7594702, -21.2188503],
        [-48.7607425, -21.2408095],
        [-48.7552557, -21.2447849],
        [-48.743891, -21.2438362],
        [-48.7413832, -21.2456167],
        [-48.7438372, -21.250662],
        [-48.742962, -21.2540472],
        [-48.7323989, -21.2604479],
        [-48.7359847, -21.2661931]
    ];

    _.map( coordinates );

    console.log( center );
    

http.get( url, function( res ) {

    var body = '';

    res.on('data', function( chunk ) {
        body += chunk;
    });

    res.on('end', function() {
        var response = JSON.parse( body );
        console.log('Got response: ', response);
    });

}).on('error', function( e ) {

      console.log('Error: ', e );

});
